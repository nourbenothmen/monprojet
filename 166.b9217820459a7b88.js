"use strict";(self.webpackChunkskeleton=self.webpackChunkskeleton||[]).push([[166],{1166:(b,u,r)=>{r.r(u),r.d(u,{ClientsComponent:()=>f});var c=r(6396),a=r(9417),e=r(7241),p=r(1111),m=r(3525);let h=(()=>{class o{constructor(n,t){this.clientService=n,this.activeModal=t,this.isEdit=!1,this.client={name:"",email:"",adresse:"",telephone:""},this.save=new e.bkB,this.isSaving=!1}onSave(){if(this.isSaving)return;this.isSaving=!0;const n={...this.client};console.log("Client avant sauvegarde (copie) :",n),this.isEdit&&this.client.id?this.clientService.updateClient(this.client.id,n).subscribe({next:t=>{this.save.emit(t),this.activeModal.close(t),this.isSaving=!1},error:t=>{console.error("Erreur lors de la mise \xe0 jour :",t),this.isSaving=!1}}):this.clientService.addClient(n).subscribe({next:t=>{this.save.emit(t),this.activeModal.close(t),this.isSaving=!1},error:t=>{console.error("Erreur lors de l\u2019ajout :",t),this.isSaving=!1}})}onClose(){this.activeModal.dismiss()}static{this.\u0275fac=function(t){return new(t||o)(e.rXU(p.X),e.rXU(m.Lw))}}static{this.\u0275cmp=e.VBU({type:o,selectors:[["app-add-edit-client-modal"]],inputs:{isEdit:"isEdit",client:"client"},outputs:{save:"save"},decls:27,vars:5,consts:[[1,"modal-header"],[1,"modal-title"],["type","button",1,"btn-close",3,"click"],[1,"modal-body"],[3,"ngSubmit"],[1,"mb-3"],[1,"form-label"],["type","text","name","name","required","",1,"form-control",3,"ngModelChange","ngModel"],["type","email","name","email","required","",1,"form-control",3,"ngModelChange","ngModel"],["type","text","name","adresse","required","",1,"form-control",3,"ngModelChange","ngModel"],["type","tel","name","telephone","required","",1,"form-control",3,"ngModelChange","ngModel"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","submit",1,"btn","btn-primary"]],template:function(t,i){1&t&&(e.j41(0,"div",0)(1,"h4",1),e.EFF(2),e.k0s(),e.j41(3,"button",2),e.bIt("click",function(){return i.onClose()}),e.k0s()(),e.j41(4,"div",3)(5,"form",4),e.bIt("ngSubmit",function(){return i.onSave()}),e.j41(6,"div",5)(7,"label",6),e.EFF(8,"Nom"),e.k0s(),e.j41(9,"input",7),e.mxI("ngModelChange",function(l){return e.DH7(i.client.name,l)||(i.client.name=l),l}),e.k0s()(),e.j41(10,"div",5)(11,"label",6),e.EFF(12,"Email"),e.k0s(),e.j41(13,"input",8),e.mxI("ngModelChange",function(l){return e.DH7(i.client.email,l)||(i.client.email=l),l}),e.k0s()(),e.j41(14,"div",5)(15,"label",6),e.EFF(16,"Adresse"),e.k0s(),e.j41(17,"input",9),e.mxI("ngModelChange",function(l){return e.DH7(i.client.adresse,l)||(i.client.adresse=l),l}),e.k0s()(),e.j41(18,"div",5)(19,"label",6),e.EFF(20,"T\xe9l\xe9phone"),e.k0s(),e.j41(21,"input",10),e.mxI("ngModelChange",function(l){return e.DH7(i.client.telephone,l)||(i.client.telephone=l),l}),e.k0s()(),e.j41(22,"div",11)(23,"button",12),e.bIt("click",function(){return i.onClose()}),e.EFF(24,"Annuler"),e.k0s(),e.j41(25,"button",13),e.EFF(26,"Enregistrer"),e.k0s()()()()),2&t&&(e.R7$(2),e.SpI("",i.isEdit?"Modifier":"Ajouter"," Client"),e.R7$(7),e.R50("ngModel",i.client.name),e.R7$(4),e.R50("ngModel",i.client.email),e.R7$(4),e.R50("ngModel",i.client.adresse),e.R7$(4),e.R50("ngModel",i.client.telephone))},dependencies:[c.MD,a.YN,a.qT,a.me,a.BC,a.cb,a.YS,a.vS,a.cV],encapsulation:2})}}return o})();var d=r(8564);function C(o,g){if(1&o){const n=e.RV6();e.j41(0,"tr")(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td"),e.EFF(6),e.k0s(),e.j41(7,"td"),e.EFF(8),e.k0s(),e.j41(9,"td"),e.EFF(10),e.k0s(),e.j41(11,"td")(12,"button",8),e.bIt("click",function(){const i=d.eBV(n).$implicit,s=e.XpG();return d.Njj(s.openEditModal(i))}),e.nrm(13,"i",9),e.k0s(),e.j41(14,"button",10),e.bIt("click",function(){const i=d.eBV(n).$implicit,s=e.XpG();return d.Njj(s.confirmDelete(i.id??void 0))}),e.nrm(15,"i",11),e.k0s()()()}if(2&o){const n=g.$implicit;e.R7$(2),e.JRh(n.id),e.R7$(2),e.JRh(n.name),e.R7$(2),e.JRh(n.email),e.R7$(2),e.JRh(n.adresse),e.R7$(2),e.JRh(n.telephone)}}let f=(()=>{class o{constructor(n,t){this.clientService=n,this.modalService=t,this.clients=[]}ngOnInit(){this.loadClients()}loadClients(){this.clientService.getAllClients().subscribe(n=>this.clients=n)}openAddModal(){const n=this.modalService.open(h);n.componentInstance.isEdit=!1,n.componentInstance.client={name:"",email:"",adresse:"",telephone:""},n.result.then(t=>{this.loadClients()},t=>{console.log("Modal ferm\xe9",t)})}openEditModal(n){const t=this.modalService.open(h);t.componentInstance.isEdit=!0,t.componentInstance.client={...n},t.result.then(i=>{this.loadClients()},i=>{console.log("Modal ferm\xe9",i)})}confirmDelete(n){n&&confirm("Voulez-vous vraiment supprimer ce client ?")&&this.clientService.deleteClient(n).subscribe(()=>{this.clients=this.clients.filter(t=>t.id!==n)})}trackByClientId(n,t){return t.id}static{this.\u0275fac=function(t){return new(t||o)(e.rXU(p.X),e.rXU(m.Bq))}}static{this.\u0275cmp=e.VBU({type:o,selectors:[["app-clients"]],decls:25,vars:2,consts:[[1,"card"],[1,"card-header"],[1,"card-title"],[1,"btn","btn-primary",3,"click"],[1,"card-body"],[1,"table-responsive"],[1,"table","table-striped"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"btn","btn-sm","btn-outline-primary","me-2",3,"click"],[1,"fa","fa-edit"],[1,"btn","btn-sm","btn-outline-danger",3,"click"],[1,"fa","fa-trash"]],template:function(t,i){1&t&&(e.j41(0,"div",0)(1,"div",1)(2,"h4",2),e.EFF(3,"Liste des Clients"),e.k0s(),e.j41(4,"button",3),e.bIt("click",function(){return i.openAddModal()}),e.EFF(5,"Ajouter Client"),e.k0s()(),e.j41(6,"div",4)(7,"div",5)(8,"table",6)(9,"thead")(10,"tr")(11,"th"),e.EFF(12,"ID"),e.k0s(),e.j41(13,"th"),e.EFF(14,"Nom"),e.k0s(),e.j41(15,"th"),e.EFF(16,"Email"),e.k0s(),e.j41(17,"th"),e.EFF(18,"Adresse"),e.k0s(),e.j41(19,"th"),e.EFF(20,"T\xe9l\xe9phone"),e.k0s(),e.j41(21,"th"),e.EFF(22,"Actions"),e.k0s()()(),e.j41(23,"tbody"),e.DNE(24,C,16,5,"tr",7),e.k0s()()()()()),2&t&&(e.R7$(24),e.Y8G("ngForOf",i.clients)("ngForTrackBy",i.trackByClientId))},dependencies:[c.MD,c.Sq,a.YN,m.UN],encapsulation:2})}}return o})()}}]);