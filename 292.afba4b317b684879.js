"use strict";(self.webpackChunkskeleton=self.webpackChunkskeleton||[]).push([[292],{1838:(f,m,r)=>{r.d(m,{c:()=>e});var p=r(9437),v=r(8564),d=r(2306);let e=(()=>{class u{constructor(l){this.http=l,this.apiUrl="http://localhost:8085/api/devises"}getAllDevises(){return this.http.get(this.apiUrl)}createDevise(l){return this.http.post(this.apiUrl,l)}updateDevise(l,a){return this.http.put(`${this.apiUrl}/${l}`,a)}deleteDevise(l){return this.http.delete(`${this.apiUrl}/${l}`).pipe((0,p.W)(a=>{throw console.error("D\xe9tails erreur suppression:",a),a}))}static{this.\u0275fac=function(a){return new(a||u)(v.KVO(d.Qq))}}static{this.\u0275prov=v.jDH({token:u,factory:u.\u0275fac,providedIn:"root"})}}return u})()},6292:(f,m,r)=>{r.r(m),r.d(m,{TblBootstrapComponent:()=>M});var p=r(6396),v=r(3413),d=r(9417),e=r(7241),u=r(3525),b=r(1838);let l=(()=>{class i{constructor(t,s){this.activeModal=t,this.deviseService=s,this.isEdit=!1,this.devise={id:0,code:"",nom:"",symbole:"",tauxChange:0}}onSubmit(){if(this.isEdit&&this.devise.id)this.deviseService.updateDevise(this.devise.id,this.devise).subscribe({next:()=>this.activeModal.close("saved"),error:t=>console.error("Error updating:",t)});else{const{id:t,...s}=this.devise;this.deviseService.createDevise(s).subscribe({next:()=>this.activeModal.close("saved"),error:o=>console.error("Error creating:",o)})}}static{this.\u0275fac=function(s){return new(s||i)(e.rXU(u.Lw),e.rXU(b.c))}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-add-edit-devise-modal"]],inputs:{isEdit:"isEdit",devise:"devise"},decls:27,vars:6,consts:[[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[3,"ngSubmit"],[1,"mb-3"],["for","code",1,"form-label"],["type","text","id","code","name","code","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","nom",1,"form-label"],["type","text","id","nom","name","nom","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","symbole",1,"form-label"],["type","text","id","symbole","name","symbole","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","taux",1,"form-label"],["type","number","id","taux","name","taux","required","",1,"form-control",3,"ngModelChange","ngModel"],[1,"modal-footer"],["type","button",1,"btn","btn-outline-secondary",3,"click"],["type","submit",1,"btn","btn-primary"]],template:function(s,o){1&s&&(e.j41(0,"div",0)(1,"h4",1),e.EFF(2),e.k0s(),e.j41(3,"button",2),e.bIt("click",function(){return o.activeModal.dismiss()}),e.k0s()(),e.j41(4,"div",3)(5,"form",4),e.bIt("ngSubmit",function(){return o.onSubmit()}),e.j41(6,"div",5)(7,"label",6),e.EFF(8,"Code"),e.k0s(),e.j41(9,"input",7),e.mxI("ngModelChange",function(n){return e.DH7(o.devise.code,n)||(o.devise.code=n),n}),e.k0s()(),e.j41(10,"div",5)(11,"label",8),e.EFF(12,"Nom"),e.k0s(),e.j41(13,"input",9),e.mxI("ngModelChange",function(n){return e.DH7(o.devise.nom,n)||(o.devise.nom=n),n}),e.k0s()(),e.j41(14,"div",5)(15,"label",10),e.EFF(16,"Symbole"),e.k0s(),e.j41(17,"input",11),e.mxI("ngModelChange",function(n){return e.DH7(o.devise.symbole,n)||(o.devise.symbole=n),n}),e.k0s()(),e.j41(18,"div",5)(19,"label",12),e.EFF(20,"Taux"),e.k0s(),e.j41(21,"input",13),e.mxI("ngModelChange",function(n){return e.DH7(o.devise.tauxChange,n)||(o.devise.tauxChange=n),n}),e.k0s()(),e.j41(22,"div",14)(23,"button",15),e.bIt("click",function(){return o.activeModal.dismiss()}),e.EFF(24,"Cancel"),e.k0s(),e.j41(25,"button",16),e.EFF(26),e.k0s()()()()),2&s&&(e.R7$(2),e.SpI("",o.isEdit?"Edit":"Add"," Devise"),e.R7$(7),e.R50("ngModel",o.devise.code),e.R7$(4),e.R50("ngModel",o.devise.nom),e.R7$(4),e.R50("ngModel",o.devise.symbole),e.R7$(4),e.R50("ngModel",o.devise.tauxChange),e.R7$(5),e.JRh(o.isEdit?"Update":"Save"))},dependencies:[p.MD,d.YN,d.qT,d.me,d.Q0,d.BC,d.cb,d.YS,d.vS,d.cV],encapsulation:2})}}return i})();var a=r(8564);const g=(i,h)=>h.id;function E(i,h){if(1&i){const t=e.RV6();e.j41(0,"tr")(1,"th",8),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td"),e.EFF(6),e.k0s(),e.j41(7,"td"),e.EFF(8),e.k0s(),e.j41(9,"td")(10,"button",9),e.bIt("click",function(){const o=a.eBV(t).$implicit,c=e.XpG();return a.Njj(c.openEditModal(o))}),e.nrm(11,"i",10),e.k0s(),e.j41(12,"button",11),e.bIt("click",function(){const o=a.eBV(t).$implicit,c=e.XpG();return a.Njj(c.confirmDelete(o.id))}),e.nrm(13,"i",12),e.k0s()()()}if(2&i){const t=h.$implicit;e.R7$(2),e.JRh(t.id),e.R7$(2),e.JRh(t.code),e.R7$(2),e.JRh(t.nom),e.R7$(2),e.JRh(t.tauxChange||"-")}}function _(i,h){1&i&&(e.j41(0,"tr")(1,"td",13),e.EFF(2,"Aucune devise trouv\xe9e"),e.k0s()())}let M=(()=>{class i{constructor(t,s){this.deviseService=t,this.modalService=s,this.devises=[]}ngOnInit(){this.loadDevises()}loadDevises(){this.deviseService.getAllDevises().subscribe({next:t=>{console.log("Donn\xe9es re\xe7ues:",t),this.devises=t},error:t=>{console.error("Erreur compl\xe8te:",t),0===t.status?console.error("Probl\xe8me de connexion au serveur"):500===t.status&&console.error("Erreur interne du serveur")}})}openAddModal(){const t=this.modalService.open(l);t.componentInstance.isEdit=!1,t.result.then(s=>{"saved"===s&&this.loadDevises()}).catch(()=>{})}openEditModal(t){const s=this.modalService.open(l);s.componentInstance.isEdit=!0,s.componentInstance.devise={...t},s.result.then(o=>{"saved"===o&&this.loadDevises()}).catch(()=>{})}confirmDelete(t){confirm("\xcates-vous s\xfbr de vouloir supprimer cette devise ?")&&this.deviseService.deleteDevise(t).subscribe({next:()=>{this.loadDevises(),console.log("Devise supprim\xe9e avec succ\xe8s")},error:s=>{console.error("Erreur suppression:",s),alert("\xc9chec de la suppression: "+(s.error?.message||s.message))}})}static{this.\u0275fac=function(s){return new(s||i)(e.rXU(b.c),e.rXU(u.Bq))}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-tbl-bootstrap"]],decls:25,vars:2,consts:[[1,"row"],[1,"col-xl-12"],["cardTitle","Liste des Devises","blockClass","table-border-style",3,"options"],[1,"mb-3"],[1,"btn","btn-primary",3,"click"],[1,"fa","fa-plus"],[1,"table-responsive"],[1,"table","table-striped"],["scope","row"],[1,"btn","btn-sm","btn-outline-primary","me-2",3,"click"],[1,"fa","fa-edit"],[1,"btn","btn-sm","btn-outline-danger",3,"click"],[1,"fa","fa-trash"],["colspan","5",1,"text-center"]],template:function(s,o){1&s&&(e.j41(0,"div",0)(1,"div",1)(2,"app-card",2)(3,"div",3)(4,"button",4),e.bIt("click",function(){return o.openAddModal()}),e.nrm(5,"i",5),e.EFF(6," Ajouter une devise "),e.k0s()(),e.j41(7,"div",6)(8,"table",7)(9,"thead")(10,"tr")(11,"th"),e.EFF(12,"Id"),e.k0s(),e.j41(13,"th"),e.EFF(14,"Code"),e.k0s(),e.j41(15,"th"),e.EFF(16,"Nom"),e.k0s(),e.j41(17,"th"),e.EFF(18,"Taux de change"),e.k0s(),e.j41(19,"th"),e.EFF(20,"Actions"),e.k0s()()(),e.j41(21,"tbody"),e.Z7z(22,E,14,4,"tr",null,g),e.nVh(24,_,3,0,"tr"),e.k0s()()()()()()),2&s&&(e.R7$(2),e.Y8G("options",!1),e.R7$(20),e.Dyx(o.devises),e.R7$(2),e.vxM(0===o.devises.length?24:-1))},dependencies:[p.MD,v.i],encapsulation:2})}}return i})()}}]);