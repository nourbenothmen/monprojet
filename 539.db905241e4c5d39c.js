"use strict";(self.webpackChunkskeleton=self.webpackChunkskeleton||[]).push([[539],{8539:(y,c,a)=>{a.r(c),a.d(c,{ProduitTableComponent:()=>v});var p=a(6396),l=a(9417),f=a(3413),t=a(7241),u=a(8564),m=a(3525),g=a(7689);function _(i,s){if(1&i&&(t.j41(0,"option",20),t.EFF(1),t.k0s()),2&i){const e=s.$implicit;t.Y8G("value",e),t.R7$(),t.JRh(e)}}function b(i,s){if(1&i){const e=t.RV6();t.j41(0,"div",5)(1,"label",6),t.EFF(2,"Version (info)"),t.k0s(),t.j41(3,"input",21),t.mxI("ngModelChange",function(o){u.eBV(e);const d=t.XpG();return t.DH7(d.produit.version,o)||(d.produit.version=o),u.Njj(o)}),t.k0s()()}if(2&i){const e=t.XpG();t.R7$(3),t.R50("ngModel",e.produit.version)}}let h=(()=>{class i{constructor(e,r){this.activeModal=e,this.produitService=r,this.isEdit=!1,this.produit={id:void 0,name:"",price:0,quantity:0,category:"",quantitySold:0,totalSales:0,lastSoldDate:"",version:void 0},this.categories=["PC","Souris","Clavier","\xc9cran","Stockage","Casque","Composant"]}save(){(this.isEdit?this.produitService.updateProduit(this.produit.id,this.produit):this.produitService.createProduit(this.produit)).subscribe({next:()=>this.activeModal.close("saved"),error:r=>console.error("Erreur:",r)})}static{this.\u0275fac=function(r){return new(r||i)(t.rXU(m.Lw),t.rXU(g.D))}}static{this.\u0275cmp=t.VBU({type:i,selectors:[["app-add-edit-produit-modal"]],inputs:{isEdit:"isEdit",produit:"produit"},decls:43,vars:10,consts:[[1,"modal-header"],[1,"modal-title"],["type","button",1,"btn-close",3,"click"],[1,"modal-body"],[3,"ngSubmit"],[1,"mb-3"],[1,"form-label"],["type","text","name","name","required","",1,"form-control",3,"ngModelChange","ngModel"],["type","number","step","0.01","name","price","required","",1,"form-control",3,"ngModelChange","ngModel"],["type","number","name","quantity","required","",1,"form-control",3,"ngModelChange","ngModel"],["name","category","required","",1,"form-select",3,"ngModelChange","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],["type","number","name","quantitySold",1,"form-control",3,"ngModelChange","ngModel"],["type","number","step","0.01","name","totalSales",1,"form-control",3,"ngModelChange","ngModel"],["type","date","name","lastSoldDate",1,"form-control",3,"ngModelChange","ngModel"],["class","mb-3",4,"ngIf"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","submit",1,"btn","btn-primary"],[3,"value"],["type","number","name","version","readonly","",1,"form-control",3,"ngModelChange","ngModel"]],template:function(r,o){1&r&&(t.j41(0,"div",0)(1,"h4",1),t.EFF(2),t.k0s(),t.j41(3,"button",2),t.bIt("click",function(){return o.activeModal.dismiss()}),t.k0s()(),t.j41(4,"div",3)(5,"form",4),t.bIt("ngSubmit",function(){return o.save()}),t.j41(6,"div",5)(7,"label",6),t.EFF(8,"Nom"),t.k0s(),t.j41(9,"input",7),t.mxI("ngModelChange",function(n){return t.DH7(o.produit.name,n)||(o.produit.name=n),n}),t.k0s()(),t.j41(10,"div",5)(11,"label",6),t.EFF(12,"Prix"),t.k0s(),t.j41(13,"input",8),t.mxI("ngModelChange",function(n){return t.DH7(o.produit.price,n)||(o.produit.price=n),n}),t.k0s()(),t.j41(14,"div",5)(15,"label",6),t.EFF(16,"Quantit\xe9"),t.k0s(),t.j41(17,"input",9),t.mxI("ngModelChange",function(n){return t.DH7(o.produit.quantity,n)||(o.produit.quantity=n),n}),t.k0s()(),t.j41(18,"div",5)(19,"label",6),t.EFF(20,"Cat\xe9gorie"),t.k0s(),t.j41(21,"select",10),t.mxI("ngModelChange",function(n){return t.DH7(o.produit.category,n)||(o.produit.category=n),n}),t.j41(22,"option",11),t.EFF(23,"S\xe9lectionnez une cat\xe9gorie"),t.k0s(),t.DNE(24,_,2,2,"option",12),t.k0s()(),t.j41(25,"div",5)(26,"label",6),t.EFF(27,"Quantit\xe9 vendue"),t.k0s(),t.j41(28,"input",13),t.mxI("ngModelChange",function(n){return t.DH7(o.produit.quantitySold,n)||(o.produit.quantitySold=n),n}),t.k0s()(),t.j41(29,"div",5)(30,"label",6),t.EFF(31,"Ventes totales"),t.k0s(),t.j41(32,"input",14),t.mxI("ngModelChange",function(n){return t.DH7(o.produit.totalSales,n)||(o.produit.totalSales=n),n}),t.k0s()(),t.j41(33,"div",5)(34,"label",6),t.EFF(35,"Derni\xe8re date de vente"),t.k0s(),t.j41(36,"input",15),t.mxI("ngModelChange",function(n){return t.DH7(o.produit.lastSoldDate,n)||(o.produit.lastSoldDate=n),n}),t.k0s()(),t.DNE(37,b,4,1,"div",16),t.j41(38,"div",17)(39,"button",18),t.bIt("click",function(){return o.activeModal.dismiss()}),t.EFF(40,"Annuler"),t.k0s(),t.j41(41,"button",19),t.EFF(42,"Enregistrer"),t.k0s()()()()),2&r&&(t.R7$(2),t.SpI("",o.isEdit?"Modifier":"Ajouter"," Produit"),t.R7$(7),t.R50("ngModel",o.produit.name),t.R7$(4),t.R50("ngModel",o.produit.price),t.R7$(4),t.R50("ngModel",o.produit.quantity),t.R7$(4),t.R50("ngModel",o.produit.category),t.R7$(3),t.Y8G("ngForOf",o.categories),t.R7$(4),t.R50("ngModel",o.produit.quantitySold),t.R7$(4),t.R50("ngModel",o.produit.totalSales),t.R7$(4),t.R50("ngModel",o.produit.lastSoldDate),t.R7$(),t.Y8G("ngIf",o.isEdit))},dependencies:[p.MD,p.Sq,p.bT,l.YN,l.qT,l.xH,l.y7,l.me,l.Q0,l.wz,l.BC,l.cb,l.YS,l.vS,l.cV],encapsulation:2})}}return i})();const F=(i,s)=>s.id;function E(i,s){if(1&i&&(t.j41(0,"option",12),t.EFF(1),t.k0s()),2&i){const e=s.$implicit;t.Y8G("value",e),t.R7$(),t.JRh(e)}}function C(i,s){1&i&&(t.j41(0,"span",14),t.EFF(1,"En stock"),t.k0s())}function k(i,s){1&i&&(t.j41(0,"span",15),t.EFF(1,"Rupture de stock"),t.k0s())}function M(i,s){if(1&i){const e=t.RV6();t.j41(0,"tr")(1,"th",13),t.EFF(2),t.k0s(),t.j41(3,"td"),t.EFF(4),t.k0s(),t.j41(5,"td"),t.EFF(6),t.k0s(),t.j41(7,"td"),t.EFF(8),t.k0s(),t.j41(9,"td"),t.EFF(10),t.k0s(),t.j41(11,"td"),t.EFF(12),t.k0s(),t.j41(13,"td"),t.EFF(14),t.k0s(),t.j41(15,"td"),t.nVh(16,C,2,0,"span",14)(17,k,2,0,"span",15),t.k0s(),t.j41(18,"td"),t.EFF(19),t.k0s(),t.j41(20,"td")(21,"button",16),t.bIt("click",function(){const o=u.eBV(e).$implicit,d=t.XpG();return u.Njj(d.openEditModal(o))}),t.nrm(22,"i",17),t.k0s(),t.j41(23,"button",18),t.bIt("click",function(){const o=u.eBV(e).$implicit,d=t.XpG();return u.Njj(d.confirmDelete(o.id??void 0))}),t.nrm(24,"i",19),t.k0s()()()}if(2&i){const e=s.$implicit;t.R7$(2),t.JRh(e.id),t.R7$(2),t.JRh(e.name),t.R7$(2),t.SpI("",e.price," TND"),t.R7$(2),t.JRh(e.quantity),t.R7$(2),t.JRh(e.quantitySold),t.R7$(2),t.SpI("",e.totalSales," TND"),t.R7$(2),t.JRh(e.lastSoldDate||"N/A"),t.R7$(2),t.vxM(e.quantity>0?16:17),t.R7$(3),t.JRh(e.category)}}function j(i,s){1&i&&(t.j41(0,"tr")(1,"td",20),t.EFF(2,"Aucun produit trouv\xe9"),t.k0s()())}let v=(()=>{class i{constructor(e,r){this.produitService=e,this.modalService=r,this.produits=[],this.filteredProduits=[],this.categories=["PC","Souris","Clavier","\xc9cran","Stockage","Casque","Composant"],this.selectedCategory=""}ngOnInit(){this.loadProduits()}loadProduits(){this.produitService.getProduits().subscribe({next:e=>{this.produits=e,this.filteredProduits=[...e]},error:e=>console.error("Erreur:",e)})}filterByCategory(){this.filteredProduits=this.selectedCategory?this.produits.filter(e=>e.category===this.selectedCategory):[...this.produits]}openAddModal(){const e=this.modalService.open(h);e.componentInstance.isEdit=!1,e.result.then(r=>{"saved"===r&&this.loadProduits()}).catch(()=>{})}openEditModal(e){const r=this.modalService.open(h);r.componentInstance.isEdit=!0,r.componentInstance.produit={...e},r.result.then(o=>{"saved"===o&&this.loadProduits()}).catch(()=>{})}confirmDelete(e){e&&confirm("\xcates-vous s\xfbr de vouloir supprimer ce produit ?")&&this.produitService.deleteProduit(e).subscribe({next:()=>{this.loadProduits(),console.log("Produit supprim\xe9 avec succ\xe8s")},error:r=>{console.error("Erreur suppression:",r),alert("\xc9chec de la suppression: "+(r.error?.message||r.message))}})}static{this.\u0275fac=function(r){return new(r||i)(t.rXU(g.D),t.rXU(m.Bq))}}static{this.\u0275cmp=t.VBU({type:i,selectors:[["app-produit-table"]],decls:40,vars:4,consts:[[1,"row"],[1,"col-xl-12"],["cardTitle","Liste des Produits","blockClass","table-border-style",3,"options"],[1,"mb-3"],[1,"btn","btn-primary",3,"click"],[1,"fa","fa-plus"],[1,"float-end"],[1,"form-select",2,"width","200px","display","inline-block",3,"ngModelChange","change","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"table-responsive"],[1,"table","table-striped"],[3,"value"],["scope","row"],[1,"badge","m-r-5","badge-pill","bg-success"],[1,"badge","m-r-5","badge-pill","bg-danger"],[1,"btn","btn-sm","btn-outline-primary","me-2",3,"click"],[1,"fa","fa-edit"],[1,"btn","btn-sm","btn-outline-danger",3,"click"],[1,"fa","fa-trash"],["colspan","10",1,"text-center"]],template:function(r,o){1&r&&(t.j41(0,"div",0)(1,"div",1)(2,"app-card",2)(3,"div",3)(4,"button",4),t.bIt("click",function(){return o.openAddModal()}),t.nrm(5,"i",5),t.EFF(6," Ajouter un produit "),t.k0s(),t.j41(7,"div",6)(8,"select",7),t.mxI("ngModelChange",function(n){return t.DH7(o.selectedCategory,n)||(o.selectedCategory=n),n}),t.bIt("change",function(){return o.filterByCategory()}),t.j41(9,"option",8),t.EFF(10,"Toutes les cat\xe9gories"),t.k0s(),t.DNE(11,E,2,2,"option",9),t.k0s()()(),t.j41(12,"div",10)(13,"table",11)(14,"thead")(15,"tr")(16,"th"),t.EFF(17,"Id"),t.k0s(),t.j41(18,"th"),t.EFF(19,"Nom"),t.k0s(),t.j41(20,"th"),t.EFF(21,"Prix"),t.k0s(),t.j41(22,"th"),t.EFF(23,"Quantit\xe9 en stock"),t.k0s(),t.j41(24,"th"),t.EFF(25,"Quantit\xe9 vendue"),t.k0s(),t.j41(26,"th"),t.EFF(27,"Ventes totales"),t.k0s(),t.j41(28,"th"),t.EFF(29,"Derni\xe8re date de vente"),t.k0s(),t.j41(30,"th"),t.EFF(31,"Status"),t.k0s(),t.j41(32,"th"),t.EFF(33,"Cat\xe9gorie"),t.k0s(),t.j41(34,"th"),t.EFF(35,"Actions"),t.k0s()()(),t.j41(36,"tbody"),t.Z7z(37,M,25,9,"tr",null,F),t.nVh(39,j,3,0,"tr"),t.k0s()()()()()()),2&r&&(t.R7$(2),t.Y8G("options",!1),t.R7$(6),t.R50("ngModel",o.selectedCategory),t.R7$(3),t.Y8G("ngForOf",o.categories),t.R7$(26),t.Dyx(o.filteredProduits),t.R7$(2),t.vxM(0===o.filteredProduits.length?39:-1))},dependencies:[p.MD,p.Sq,l.YN,l.xH,l.y7,l.wz,l.BC,l.vS,f.i],encapsulation:2})}}return i})()}}]);