"use strict";(self.webpackChunkskeleton=self.webpackChunkskeleton||[]).push([[685],{482:(j,g,r)=>{r.d(g,{P:()=>h});var h=function(u){return u.REGLE="REGLE",u.NON_REGLE="NON_REGLE",u}(h||{})},676:(j,g,r)=>{r.d(g,{Q:()=>f});var h=r(9437),u=r(7673),b=r(8564),t=r(2306);let f=(()=>{class a{constructor(l){this.http=l,this.baseURL="http://localhost:8083/api/factures"}calculateCAByMonthAndYear(l,p){return this.http.get(`${this.baseURL}/calculateCAByMonthAndYear?month=${l}&year=${p}`)}calculateCAByYear(l){return this.http.get(`${this.baseURL}/calculateCAByYear?year=${l}`)}getFacturesByStatus(l){return this.http.get(`${this.baseURL}/status/${l}`)}calculateCAByWeekAndYear(l,p){return this.http.get(`${this.baseURL}/calculateCAByWeekAndYear?week=${l}&year=${p}`)}getAllFactures(){return this.http.get(`${this.baseURL}`)}getFacturesByClient(l){return this.http.get(`${this.baseURL}/client/${l}`)}deleteFacture(l){return this.http.delete(`${this.baseURL}/${l}`)}createFacture(l){return this.http.post(this.baseURL,l)}updateFacture(l,p){return this.http.put(`${this.baseURL}/${l}`,p)}getCAByMonthForYear(l){return this.http.get(`${this.baseURL}/caByMonthForYear?year=${l}`)}getTopLoyalClientsByYear(l){return this.http.get(`${this.baseURL}/top-loyal-clients?year=${l}`)}getTotalRemainingAmount(){return this.http.get(`${this.baseURL}/total-remaining-amount`).pipe((0,h.W)(l=>(console.error("Erreur lors de la r\xe9cup\xe9ration du reste global:",l),(0,u.of)(0))))}getDebtsByClient(){return this.http.get(`${this.baseURL}/debts-by-client`).pipe((0,h.W)(l=>(console.error("Erreur lors de la r\xe9cup\xe9ration des dettes par client:",l),(0,u.of)([]))))}getTotalClients(){return this.http.get(`${this.baseURL}/total`).pipe((0,h.W)(l=>(console.error("Erreur lors de la r\xe9cup\xe9ration du total des clients:",l),(0,u.of)(0))))}static{this.\u0275fac=function(p){return new(p||a)(b.KVO(t.Qq))}}static{this.\u0275prov=b.jDH({token:a,factory:a.\u0275fac,providedIn:"root"})}}return a})()},4685:(j,g,r)=>{r.r(g),r.d(g,{DashAnalyticsComponent:()=>ct});var h=r(482),u=r(2389),b=r(467),t=r(7241),f=r(8564),a=r(7705),D=r(9377),l=r(6780);let v,p=1;const y={};function S(n){return n in y&&(delete y[n],!0)}const O={setImmediate(n){const i=p++;return y[i]=!0,v||(v=Promise.resolve()),v.then(()=>S(i)&&n()),i},clearImmediate(n){S(n)}},{setImmediate:I,clearImmediate:L}=O,C={setImmediate(...n){const{delegate:i}=C;return(i?.setImmediate||I)(...n)},clearImmediate(n){const{delegate:i}=C;return(i?.clearImmediate||L)(n)},delegate:void 0};var B=r(9687);const Y=new class P extends B.q{flush(i){this._active=!0;const e=this._scheduled;this._scheduled=void 0;const{actions:o}=this;let s;i=i||o.shift();do{if(s=i.execute(i.state,i.delay))break}while((i=o[0])&&i.id===e&&o.shift());if(this._active=!1,s){for(;(i=o[0])&&i.id===e&&o.shift();)i.unsubscribe();throw s}}}(class T extends l.R{constructor(i,e){super(i,e),this.scheduler=i,this.work=e}requestAsyncId(i,e,o=0){return null!==o&&o>0?super.requestAsyncId(i,e,o):(i.actions.push(this),i._scheduled||(i._scheduled=C.setImmediate(i.flush.bind(i,void 0))))}recycleAsyncId(i,e,o=0){var s;if(null!=o?o>0:this.delay>0)return super.recycleAsyncId(i,e,o);const{actions:d}=i;null!=e&&(null===(s=d[d.length-1])||void 0===s?void 0:s.id)!==e&&(C.clearImmediate(e),i._scheduled===e&&(i._scheduled=void 0))}}),_=["chart"];let $=(()=>{class n{constructor(){this.chart=(0,a.hFB)(),this.annotations=(0,a.hFB)(),this.colors=(0,a.hFB)(),this.dataLabels=(0,a.hFB)(),this.series=(0,a.hFB)(),this.stroke=(0,a.hFB)(),this.labels=(0,a.hFB)(),this.legend=(0,a.hFB)(),this.markers=(0,a.hFB)(),this.noData=(0,a.hFB)(),this.fill=(0,a.hFB)(),this.tooltip=(0,a.hFB)(),this.plotOptions=(0,a.hFB)(),this.responsive=(0,a.hFB)(),this.xaxis=(0,a.hFB)(),this.yaxis=(0,a.hFB)(),this.forecastDataPoints=(0,a.hFB)(),this.grid=(0,a.hFB)(),this.states=(0,a.hFB)(),this.title=(0,a.hFB)(),this.subtitle=(0,a.hFB)(),this.theme=(0,a.hFB)(),this.autoUpdateSeries=(0,a.hFB)(!0),this.chartReady=(0,a.CGW)(),this.chartInstance=(0,f.vPA)(null),this.chartElement=a.ebz.required("chart"),this.ngZone=(0,f.WQX)(t.SKi),this.isBrowser=(0,D.UE)((0,f.WQX)(t.Agw))}ngOnChanges(e){this.isBrowser&&this.ngZone.runOutsideAngular(()=>{Y.schedule(()=>this.hydrate(e))})}ngOnDestroy(){this.destroy()}hydrate(e){this.autoUpdateSeries()&&0===Object.keys(e).filter(s=>"series"!==s).length?this.updateSeries(this.series(),!0):this.createElement()}createElement(){var e=this;return(0,b.A)(function*(){const{default:o}=yield r.e(356).then(r.bind(r,4356));window.ApexCharts||=o;const s={};["annotations","chart","colors","dataLabels","series","stroke","labels","legend","fill","tooltip","plotOptions","responsive","markers","noData","xaxis","yaxis","forecastDataPoints","grid","states","title","subtitle","theme"].forEach(A=>{const F=e[A]();F&&(s[A]=F)}),e.destroy();const c=e.ngZone.runOutsideAngular(()=>new o(e.chartElement().nativeElement,s));e.chartInstance.set(c),e.render(),e.chartReady.emit({chartObj:c})})()}render(){return this.ngZone.runOutsideAngular(()=>this.chartInstance()?.render())}updateOptions(e,o,s,d){return this.ngZone.runOutsideAngular(()=>this.chartInstance()?.updateOptions(e,o,s,d))}updateSeries(e,o){return this.ngZone.runOutsideAngular(()=>this.chartInstance()?.updateSeries(e,o))}appendSeries(e,o){this.ngZone.runOutsideAngular(()=>this.chartInstance()?.appendSeries(e,o))}appendData(e){this.ngZone.runOutsideAngular(()=>this.chartInstance()?.appendData(e))}highlightSeries(e){return this.ngZone.runOutsideAngular(()=>this.chartInstance()?.highlightSeries(e))}toggleSeries(e){return this.ngZone.runOutsideAngular(()=>this.chartInstance()?.toggleSeries(e))}showSeries(e){this.ngZone.runOutsideAngular(()=>this.chartInstance()?.showSeries(e))}hideSeries(e){this.ngZone.runOutsideAngular(()=>this.chartInstance()?.hideSeries(e))}resetSeries(){this.ngZone.runOutsideAngular(()=>this.chartInstance()?.resetSeries())}zoomX(e,o){this.ngZone.runOutsideAngular(()=>this.chartInstance()?.zoomX(e,o))}toggleDataPointSelection(e,o){this.ngZone.runOutsideAngular(()=>this.chartInstance()?.toggleDataPointSelection(e,o))}destroy(){this.chartInstance()?.destroy(),this.chartInstance.set(null)}setLocale(e){this.ngZone.runOutsideAngular(()=>this.chartInstance()?.setLocale(e))}paper(){this.ngZone.runOutsideAngular(()=>this.chartInstance()?.paper())}addXaxisAnnotation(e,o,s){this.ngZone.runOutsideAngular(()=>this.chartInstance()?.addXaxisAnnotation(e,o,s))}addYaxisAnnotation(e,o,s){this.ngZone.runOutsideAngular(()=>this.chartInstance()?.addYaxisAnnotation(e,o,s))}addPointAnnotation(e,o,s){this.ngZone.runOutsideAngular(()=>this.chartInstance()?.addPointAnnotation(e,o,s))}removeAnnotation(e,o){this.ngZone.runOutsideAngular(()=>this.chartInstance()?.removeAnnotation(e,o))}clearAnnotations(e){this.ngZone.runOutsideAngular(()=>this.chartInstance()?.clearAnnotations(e))}dataURI(e){return this.chartInstance()?.dataURI(e)}static{this.\u0275fac=function(o){return new(o||n)}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["apx-chart"]],viewQuery:function(o,s){1&o&&t.wEZ(s.chartElement,_,5),2&o&&t.NyB()},inputs:{chart:[1,"chart"],annotations:[1,"annotations"],colors:[1,"colors"],dataLabels:[1,"dataLabels"],series:[1,"series"],stroke:[1,"stroke"],labels:[1,"labels"],legend:[1,"legend"],markers:[1,"markers"],noData:[1,"noData"],fill:[1,"fill"],tooltip:[1,"tooltip"],plotOptions:[1,"plotOptions"],responsive:[1,"responsive"],xaxis:[1,"xaxis"],yaxis:[1,"yaxis"],forecastDataPoints:[1,"forecastDataPoints"],grid:[1,"grid"],states:[1,"states"],title:[1,"title"],subtitle:[1,"subtitle"],theme:[1,"theme"],autoUpdateSeries:[1,"autoUpdateSeries"]},outputs:{chartReady:"chartReady"},features:[t.OA$],decls:2,vars:0,consts:[["chart",""]],template:function(o,s){1&o&&t.nrm(0,"div",null,0)},encapsulation:2,changeDetection:0})}}return n})(),G=(()=>{class n{static{this.\u0275fac=function(o){return new(o||n)}}static{this.\u0275mod=t.$C({type:n})}static{this.\u0275inj=f.G2t({})}}return n})();var m=r(9417),R=r(7673),M=r(7468),k=r(9437),N=r(676),x=r(7689),J=r(1111),E=r(6396),U=r(3413);function Z(n,i){if(1&n&&(t.j41(0,"option",48),t.EFF(1),t.k0s()),2&n){const e=i.$implicit;t.Y8G("value",e),t.R7$(),t.JRh(e)}}function W(n,i){if(1&n&&(t.j41(0,"tr")(1,"th",49),t.EFF(2),t.k0s(),t.j41(3,"td"),t.EFF(4),t.k0s(),t.j41(5,"td"),t.EFF(6),t.k0s(),t.j41(7,"td"),t.EFF(8),t.k0s()()),2&n){const e=i.$implicit,o=i.index;t.R7$(2),t.JRh(o+1),t.R7$(2),t.JRh(e.nom),t.R7$(2),t.JRh(e.email),t.R7$(2),t.JRh(e.factureCount)}}function w(n,i){1&n&&(t.j41(0,"tr")(1,"td",50),t.EFF(2,"Aucun client fid\xe8le trouv\xe9 pour cette ann\xe9e."),t.k0s()())}function X(n,i){if(1&n&&(t.j41(0,"option",48),t.EFF(1),t.k0s()),2&n){const e=i.$implicit;t.Y8G("value",e),t.R7$(),t.JRh(e)}}function Q(n,i){1&n&&(t.j41(0,"div",1)(1,"div",51)(2,"span",52),t.EFF(3,"Chargement..."),t.k0s()()())}function H(n,i){if(1&n&&(t.j41(0,"tr")(1,"th",49),t.EFF(2),t.k0s(),t.j41(3,"td"),t.EFF(4),t.k0s(),t.j41(5,"td"),t.EFF(6),t.k0s(),t.j41(7,"td"),t.EFF(8),t.nI1(9,"currency"),t.k0s(),t.j41(10,"td"),t.EFF(11),t.k0s(),t.j41(12,"td"),t.EFF(13),t.nI1(14,"currency"),t.k0s()()),2&n){const e=i.$implicit,o=i.index;t.R7$(2),t.JRh(o+1),t.R7$(2),t.JRh(e.name),t.R7$(2),t.JRh(e.category),t.R7$(2),t.JRh(t.ii3(9,6,e.price,"TND","symbol","1.2-2")),t.R7$(3),t.JRh(e.quantitySold),t.R7$(2),t.JRh(t.ii3(14,11,e.price*e.quantitySold,"TND","symbol","1.2-2"))}}function K(n,i){1&n&&(t.j41(0,"tr")(1,"td",54),t.EFF(2,"Aucun produit trouv\xe9"),t.k0s()())}function z(n,i){if(1&n&&(t.j41(0,"div",26)(1,"table",53)(2,"thead")(3,"tr")(4,"th"),t.EFF(5,"#"),t.k0s(),t.j41(6,"th"),t.EFF(7,"Nom"),t.k0s(),t.j41(8,"th"),t.EFF(9,"Cat\xe9gorie"),t.k0s(),t.j41(10,"th"),t.EFF(11,"Prix unitaire"),t.k0s(),t.j41(12,"th"),t.EFF(13,"Quantit\xe9 vendue"),t.k0s(),t.j41(14,"th"),t.EFF(15,"Chiffre d'affaires"),t.k0s()()(),t.j41(16,"tbody"),t.DNE(17,H,15,16,"tr",29)(18,K,3,0,"tr",30),t.k0s()()()),2&n){const e=t.XpG();t.R7$(17),t.Y8G("ngForOf",e.mostRequestedProducts),t.R7$(),t.Y8G("ngIf",0===e.mostRequestedProducts.length)}}function V(n,i){if(1&n&&(t.j41(0,"option",55),t.EFF(1),t.k0s()),2&n){const e=i.$implicit,o=t.XpG();t.Y8G("value",e)("selected",e===o.selectedYear),t.R7$(),t.SpI(" ",e," ")}}function q(n,i){if(1&n&&(t.j41(0,"option",48),t.EFF(1),t.k0s()),2&n){const e=i.$implicit;t.Y8G("value",e),t.R7$(),t.SpI(" ",e," ")}}function tt(n,i){if(1&n&&(t.j41(0,"tr")(1,"th",49),t.EFF(2),t.k0s(),t.j41(3,"td"),t.EFF(4),t.k0s(),t.j41(5,"td"),t.EFF(6),t.k0s(),t.j41(7,"td"),t.EFF(8),t.k0s(),t.j41(9,"td"),t.EFF(10),t.nI1(11,"currency"),t.k0s(),t.j41(12,"td"),t.EFF(13),t.nI1(14,"currency"),t.k0s()()),2&n){const e=i.$implicit,o=i.index;t.R7$(2),t.JRh(o+1),t.R7$(2),t.JRh(e.name),t.R7$(2),t.JRh(e.category),t.R7$(2),t.JRh(e.quantitySold),t.R7$(2),t.JRh(t.ii3(11,6,e.price,"TND","symbol","1.2-2")),t.R7$(3),t.JRh(t.ii3(14,11,e.price*e.quantitySold,"TND","symbol","1.2-2"))}}function et(n,i){1&n&&(t.j41(0,"tr")(1,"td",54)(2,"div",51)(3,"span",52),t.EFF(4,"Loading..."),t.k0s()()()())}function st(n,i){1&n&&(t.j41(0,"tr")(1,"td",54),t.EFF(2,"Aucun produit trouv\xe9"),t.k0s()())}function nt(n,i){if(1&n&&(t.j41(0,"tr")(1,"td"),t.EFF(2),t.k0s(),t.j41(3,"td"),t.EFF(4),t.k0s(),t.j41(5,"td"),t.EFF(6),t.k0s(),t.j41(7,"td"),t.EFF(8),t.k0s(),t.j41(9,"td"),t.EFF(10),t.k0s()()),2&n){const e=i.$implicit;t.R7$(2),t.JRh(e.clientId),t.R7$(2),t.JRh(e.name),t.R7$(2),t.JRh(e.email),t.R7$(2),t.JRh(e.telephone),t.R7$(2),t.JRh(e.debtAmount)}}function it(n,i){1&n&&(t.j41(0,"tr")(1,"td",54),t.EFF(2,"Aucune dette trouv\xe9e."),t.k0s()())}function ot(n,i){if(1&n&&(t.j41(0,"option",55),t.EFF(1),t.k0s()),2&n){const e=i.$implicit,o=t.XpG();t.Y8G("value",e)("selected",e===o.selectedYear),t.R7$(),t.SpI(" ",e," ")}}function rt(n,i){1&n&&(t.j41(0,"tr")(1,"td",56)(2,"div",51)(3,"span",52),t.EFF(4,"Loading..."),t.k0s()()()())}function at(n,i){if(1&n&&(t.j41(0,"tr")(1,"td"),t.EFF(2),t.k0s(),t.j41(3,"td"),t.EFF(4),t.k0s(),t.j41(5,"td"),t.EFF(6),t.nI1(7,"number"),t.k0s(),t.j41(8,"td"),t.EFF(9),t.k0s(),t.j41(10,"td",57),t.EFF(11),t.k0s()()),2&n){const e=i.$implicit;t.R7$(2),t.JRh(e.id),t.R7$(2),t.JRh(e.name),t.R7$(2),t.JRh(t.i5U(7,5,e.price,"1.2-2")),t.R7$(3),t.JRh(e.category),t.R7$(2),t.SpI("",e.quantity," (Rupture)")}}function lt(n,i){1&n&&(t.j41(0,"tr")(1,"td",56),t.EFF(2,"Aucun produit en rupture de stock"),t.k0s()())}let ct=(()=>{class n{constructor(e,o,s){this.factureService=e,this.produitService=o,this.clientService=s,this.cards=[{background:"bg-c-blue",title:"Orders Received",icon:"icon-shopping-cart",text:"Completed Orders",number:"486",no:"351"},{background:"bg-c-green",title:"Total Sales",icon:"icon-tag",text:"This Month",number:"1641",no:"213"},{background:"bg-c-yellow",title:"Revenue",icon:"icon-repeat",text:"This Month",number:"$42,56",no:"$5,032"},{background:"bg-c-red",title:"Total Profit",icon:"icon-shopping-cart",text:"This Month",number:"$9,562",no:"$542"}],this.pie1CAC={series:[],labels:["Factures r\xe9gl\xe9es","Factures non r\xe9gl\xe9es"],chart:{type:"pie",height:300},dataLabels:{enabled:!0,formatter:function(d,c){return c.w.config.series[c.seriesIndex]+"%"}},colors:["#4CAF50","#F44336"],legend:{position:"bottom"},responsive:[{breakpoint:480,options:{chart:{width:200},legend:{position:"bottom"}}}]},this.bar1CAC={chart:{height:350,type:"bar",toolbar:{show:!1}},plotOptions:{bar:{horizontal:!1,columnWidth:"40%",endingShape:"rounded"}},dataLabels:{enabled:!1},stroke:{show:!0,width:2,colors:["transparent"]},series:[{name:"Chiffre d\u2019Affaires (TND)",data:[]}],colors:["#4CAF50"],xaxis:{categories:["Jan","F\xe9v","Mar","Avr","Mai","Jun","Jul","Ao\xfb","Sep","Oct","Nov","D\xe9c"]},yaxis:{title:{text:"Chiffre d\u2019Affaires (TND)"}},fill:{opacity:1},tooltip:{y:{formatter:function(d){return d.toLocaleString()+" TND"}}}},this.years=[],this.selectedYear=null,this.loyalClients=[],this.mostRequestedProducts=[],this.productLimitOptions=[3,5,10,20],this.selectedProductLimit=5,this.isLoadingProducts=!1,this.bestSellingProducts=[],this.selectedBestSellingLimit=5,this.isLoadingBestSellers=!1,this.outOfStockProducts=[],this.isLoadingOutOfStock=!1,this.totalRemainingAmount=0,this.totalClients=0,this.totalProduits=0,this.debtsByClient=[]}ngOnInit(){this.loadInvoiceStats(),this.loadAvailableYears(),this.loadMostRequestedProducts(),this.loadBestSellingProducts(),this.loadOutOfStockProducts(),this.loadTotalRemainingAmount(),this.loadDebtsByClient(),this.loadTotals()}loadInvoiceStats(){this.factureService.getAllFactures().subscribe(e=>{const o=e.filter(F=>F.status===h.P.REGLE).length,s=e.filter(F=>F.status===h.P.NON_REGLE).length,d=o+s,c=d>0?Math.round(o/d*100):0,A=d>0?Math.round(s/d*100):0;this.pie1CAC.series=[c,A]})}loadAvailableYears(){this.factureService.getAllFactures().subscribe(e=>{const o=new Set(e.map(s=>new Date(s.dateFacture).getFullYear()));this.years=Array.from(o).sort((s,d)=>s-d),this.years.length>0&&(this.selectedYear=this.years[this.years.length-1],this.loadYearlyCAStats(),this.loadLoyalClients())})}loadYearlyCAStats(){this.selectedYear&&this.factureService.getCAByMonthForYear(this.selectedYear).subscribe({next:e=>{this.bar1CAC.series=[{name:"Chiffre d\u2019Affaires (TND)",data:e}]},error:e=>console.error("Erreur lors du chargement du CA:",e)})}loadLoyalClients(){this.selectedYear&&this.factureService.getTopLoyalClientsByYear(this.selectedYear).subscribe({next:e=>{this.loyalClients=e,console.log("Clients fid\xe8les:",e)},error:e=>console.error("Erreur lors du chargement des clients fid\xe8les:",e)})}onYearChange(e){this.selectedYear=+e.target.value,this.loadYearlyCAStats()}loadMostRequestedProducts(){this.isLoadingProducts=!0,this.produitService.getMostRequestedProducts(this.selectedProductLimit).pipe((0,k.W)(e=>(console.error("Error loading most requested products:",e),(0,R.of)([])))).subscribe({next:e=>{this.mostRequestedProducts=e,this.isLoadingProducts=!1},error:e=>{console.error(e),this.isLoadingProducts=!1}})}loadBestSellingProducts(){this.selectedYear&&(this.isLoadingBestSellers=!0,this.produitService.getBestSellingProductsByYear(this.selectedYear,this.selectedBestSellingLimit).pipe((0,k.W)(e=>(console.error("Error loading best selling products:",e),(0,R.of)([])))).subscribe({next:e=>{this.bestSellingProducts=e,this.isLoadingBestSellers=!1},error:e=>{console.error(e),this.isLoadingBestSellers=!1}}))}loadOutOfStockProducts(){this.isLoadingOutOfStock=!0,this.produitService.getOutOfStockProducts().pipe((0,k.W)(e=>(console.error("Error loading out of stock products:",e),(0,R.of)([])))).subscribe({next:e=>{this.outOfStockProducts=e,this.isLoadingOutOfStock=!1},error:e=>{console.error(e),this.isLoadingOutOfStock=!1}})}loadTotalRemainingAmount(){this.factureService.getTotalRemainingAmount().subscribe({next:e=>{this.totalRemainingAmount=e,console.log("Reste global des montants non pay\xe9s:",e)},error:e=>{console.error("Erreur lors du chargement du reste global:",e),this.totalRemainingAmount=0}})}onProductLimitChange(){this.loadMostRequestedProducts()}loadDebtsByClient(){this.factureService.getDebtsByClient().subscribe({next:e=>{this.debtsByClient=e,console.log("Dettes par client:",e)},error:e=>{console.error("Erreur lors du chargement des dettes par client:",e),this.debtsByClient=[]}})}loadTotals(){(0,M.p)({clients:this.clientService.getTotalClients(),produits:this.produitService.getTotalProduits()}).subscribe({next:e=>{this.totalClients=e.clients,this.totalProduits=e.produits,console.log("Total clients:",this.totalClients,"Total produits:",this.totalProduits)},error:e=>{console.error("Erreur lors du chargement des totaux:",e),this.totalClients=0,this.totalProduits=0}})}static{this.\u0275fac=function(o){return new(o||n)(t.rXU(N.Q),t.rXU(x.D),t.rXU(J.X))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-dash-analytics"]],decls:163,vars:45,consts:[[1,"container","mt-5"],[1,"text-center"],[1,"row","g-4","mb-4"],[1,"col-md-3"],[1,"card","bg-c-blue","text-white","mb-4"],[1,"card-body"],[1,"fas","fa-users","icon-custom","float-end","fa-2x",2,"color","#ff6f61"],[1,"text-white"],[1,"mb-0"],[1,"card","bg-c-green","text-white","mb-4"],[1,"fas","fa-gift","icon-custom","float-end","fa-2x",2,"color","#4caf50"],[1,"card","bg-c-purple","text-white","mb-4"],[1,"fas","fa-coins","icon-custom","float-end","fa-2x",2,"color","#ffca28"],[1,"card","mb-4"],[1,"fas","fa-donut-ring","icon-custom","me-2",2,"color","#e91e63"],[3,"series","chart","labels","dataLabels","colors","legend","responsive"],[1,"mb-4"],["for","yearSelect",1,"form-label"],[1,"fas","fa-calendar-days","icon-custom","me-2",2,"color","#3f51b5"],["id","yearSelect",1,"form-select",3,"change","ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],[1,"fas","fa-chart-line","icon-custom","me-2",2,"color","#9c27b0"],[3,"series","chart","plotOptions","dataLabels","stroke","colors","xaxis","yaxis","fill","tooltip"],[1,"col-xl-12"],["cardTitle","Les clients les plus fid\xe8les","blockClass","table-border-style",3,"options"],[1,"fas","fa-crown","icon-custom","me-2",2,"color","#ffd700"],[1,"table-responsive"],[1,"table","table-styling"],[1,"table-primary"],[4,"ngFor","ngForOf"],[4,"ngIf"],["cardTitle","Produits les plus demand\xe9s","blockClass","table-border-style",3,"options"],[1,"fas","fa-bolt","icon-custom","me-2",2,"color","#ff9800"],[1,"row","mb-3"],["for","productLimit",1,"form-label"],["id","productLimit",1,"form-select",3,"ngModelChange","change","ngModel"],["class","text-center",4,"ngIf"],["class","table-responsive",4,"ngIf"],["cardTitle","Produits les plus vendus par ann\xe9e","blockClass","table-border-style",3,"options"],[1,"fas","fa-medal","icon-custom","me-2",2,"color","#2196f3"],[1,"form-label"],[1,"form-select",3,"change"],[3,"value","selected",4,"ngFor","ngForOf"],[1,"form-select",3,"ngModelChange","change","ngModel"],["cardTitle","Dettes par Client","blockClass","table-border-style",3,"options"],[1,"fas","fa-bell","icon-custom","me-2",2,"color","#f44336"],["cardTitle","Produits en Rupture de Stock","blockClass","table-border-style",3,"options"],[1,"fas","fa-exclamation-triangle","icon-custom","me-2",2,"color","#ff5722"],[3,"value"],["scope","row"],["colspan","4",1,"text-center"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[1,"table","table-xl"],["colspan","6",1,"text-center"],[3,"value","selected"],["colspan","5",1,"text-center"],[1,"text-danger"]],template:function(o,s){1&o&&(t.j41(0,"div",0)(1,"h2",1),t.EFF(2,"Tableau de Bord Analytique"),t.k0s(),t.nrm(3,"br"),t.j41(4,"div",2)(5,"div",3)(6,"div",4)(7,"div",5),t.nrm(8,"i",6),t.j41(9,"h6",7),t.EFF(10,"Total Clients"),t.k0s(),t.j41(11,"h2",8),t.EFF(12),t.k0s(),t.j41(13,"p"),t.EFF(14,"Nombre total de clients"),t.k0s()()()(),t.j41(15,"div",3)(16,"div",9)(17,"div",5),t.nrm(18,"i",10),t.j41(19,"h6",7),t.EFF(20,"Total Produits"),t.k0s(),t.j41(21,"h2",8),t.EFF(22),t.k0s(),t.j41(23,"p"),t.EFF(24,"Nombre total de produits"),t.k0s()()()(),t.j41(25,"div",3)(26,"div",11)(27,"div",5),t.nrm(28,"i",12),t.j41(29,"h6",7),t.EFF(30,"Reste Global Non Pay\xe9"),t.k0s(),t.j41(31,"h2",8),t.EFF(32),t.k0s(),t.j41(33,"p"),t.EFF(34,"Montant restant \xe0 r\xe9gler"),t.k0s()()()()(),t.j41(35,"div",13)(36,"div",5)(37,"h4"),t.nrm(38,"i",14),t.EFF(39,"Statut des Factures"),t.k0s(),t.nrm(40,"apx-chart",15),t.k0s()(),t.j41(41,"div",16)(42,"label",17),t.nrm(43,"i",18),t.EFF(44,"S\xe9lectionner une ann\xe9e :"),t.k0s(),t.j41(45,"select",19),t.bIt("change",function(c){return s.onYearChange(c)}),t.mxI("ngModelChange",function(c){return t.DH7(s.selectedYear,c)||(s.selectedYear=c),c}),t.DNE(46,Z,2,2,"option",20),t.k0s()(),t.j41(47,"div",13)(48,"div",5)(49,"h4"),t.nrm(50,"i",21),t.EFF(51,"Chiffre d\u2019Affaires par Ann\xe9e"),t.k0s(),t.nrm(52,"apx-chart",22),t.k0s()(),t.j41(53,"div",23)(54,"app-card",24),t.nrm(55,"i",25),t.j41(56,"div",26)(57,"table",27)(58,"thead")(59,"tr",28)(60,"th"),t.EFF(61,"#"),t.k0s(),t.j41(62,"th"),t.EFF(63,"Nom"),t.k0s(),t.j41(64,"th"),t.EFF(65,"Email"),t.k0s(),t.j41(66,"th"),t.EFF(67,"Nombre de Factures"),t.k0s()()(),t.j41(68,"tbody"),t.DNE(69,W,9,4,"tr",29)(70,w,3,0,"tr",30),t.k0s()()()()(),t.j41(71,"div",23)(72,"app-card",31),t.nrm(73,"i",32),t.j41(74,"div",33)(75,"div",3)(76,"label",34),t.EFF(77,"Nombre de produits \xe0 afficher"),t.k0s(),t.j41(78,"select",35),t.mxI("ngModelChange",function(c){return t.DH7(s.selectedProductLimit,c)||(s.selectedProductLimit=c),c}),t.bIt("change",function(){return s.onProductLimitChange()}),t.DNE(79,X,2,2,"option",20),t.k0s()()(),t.DNE(80,Q,4,0,"div",36)(81,z,19,2,"div",37),t.k0s()(),t.j41(82,"div",23)(83,"app-card",38),t.nrm(84,"i",39),t.j41(85,"div",33)(86,"div",3)(87,"label",40),t.EFF(88,"Ann\xe9e"),t.k0s(),t.j41(89,"select",41),t.bIt("change",function(c){return s.onYearChange(c)}),t.DNE(90,V,2,3,"option",42),t.k0s()(),t.j41(91,"div",3)(92,"label",40),t.EFF(93,"Nombre de produits"),t.k0s(),t.j41(94,"select",43),t.mxI("ngModelChange",function(c){return t.DH7(s.selectedBestSellingLimit,c)||(s.selectedBestSellingLimit=c),c}),t.bIt("change",function(){return s.loadBestSellingProducts()}),t.DNE(95,q,2,2,"option",20),t.k0s()()(),t.j41(96,"div",26)(97,"table",27)(98,"thead")(99,"tr")(100,"th"),t.EFF(101,"#"),t.k0s(),t.j41(102,"th"),t.EFF(103,"Nom du produit"),t.k0s(),t.j41(104,"th"),t.EFF(105,"Cat\xe9gorie"),t.k0s(),t.j41(106,"th"),t.EFF(107,"Quantit\xe9 vendue"),t.k0s(),t.j41(108,"th"),t.EFF(109,"Prix unitaire"),t.k0s(),t.j41(110,"th"),t.EFF(111,"Chiffre d'affaires"),t.k0s()()(),t.j41(112,"tbody"),t.DNE(113,tt,15,16,"tr",29)(114,et,5,0,"tr",30)(115,st,3,0,"tr",30),t.k0s()()()()(),t.j41(116,"div",23)(117,"app-card",44),t.nrm(118,"i",45),t.j41(119,"div",26)(120,"table",27)(121,"thead")(122,"tr",28)(123,"th"),t.EFF(124,"ID Client"),t.k0s(),t.j41(125,"th"),t.EFF(126,"Nom Client"),t.k0s(),t.j41(127,"th"),t.EFF(128,"Email"),t.k0s(),t.j41(129,"th"),t.EFF(130,"T\xe9l\xe9phone"),t.k0s(),t.j41(131,"th"),t.EFF(132,"Dette Totale (DT)"),t.k0s()()(),t.j41(133,"tbody"),t.DNE(134,nt,11,5,"tr",29)(135,it,3,0,"tr",30),t.k0s()()()()(),t.j41(136,"div",23)(137,"app-card",46),t.nrm(138,"i",47),t.j41(139,"div",33)(140,"div",3)(141,"label",40),t.EFF(142,"Ann\xe9e"),t.k0s(),t.j41(143,"select",41),t.bIt("change",function(c){return s.onYearChange(c)}),t.DNE(144,ot,2,3,"option",42),t.k0s()()(),t.j41(145,"div",26)(146,"table",27)(147,"thead")(148,"tr")(149,"th"),t.EFF(150,"ID"),t.k0s(),t.j41(151,"th"),t.EFF(152,"Nom"),t.k0s(),t.j41(153,"th"),t.EFF(154,"Prix (TND)"),t.k0s(),t.j41(155,"th"),t.EFF(156,"Cat\xe9gorie"),t.k0s(),t.j41(157,"th"),t.EFF(158,"Quantit\xe9"),t.k0s()()(),t.j41(159,"tbody"),t.DNE(160,rt,5,0,"tr",30)(161,at,12,8,"tr",29)(162,lt,3,0,"tr",30),t.k0s()()()()()()),2&o&&(t.R7$(12),t.JRh(s.totalClients),t.R7$(10),t.JRh(s.totalProduits),t.R7$(10),t.SpI("",s.totalRemainingAmount," DT"),t.R7$(8),t.Y8G("series",s.pie1CAC.series)("chart",s.pie1CAC.chart)("labels",s.pie1CAC.labels)("dataLabels",s.pie1CAC.dataLabels)("colors",s.pie1CAC.colors)("legend",s.pie1CAC.legend)("responsive",s.pie1CAC.responsive),t.R7$(5),t.R50("ngModel",s.selectedYear),t.R7$(),t.Y8G("ngForOf",s.years),t.R7$(6),t.Y8G("series",s.bar1CAC.series)("chart",s.bar1CAC.chart)("plotOptions",s.bar1CAC.plotOptions)("dataLabels",s.bar1CAC.dataLabels)("stroke",s.bar1CAC.stroke)("colors",s.bar1CAC.colors)("xaxis",s.bar1CAC.xaxis)("yaxis",s.bar1CAC.yaxis)("fill",s.bar1CAC.fill)("tooltip",s.bar1CAC.tooltip),t.R7$(2),t.Y8G("options",!1),t.R7$(15),t.Y8G("ngForOf",s.loyalClients),t.R7$(),t.Y8G("ngIf",0===s.loyalClients.length),t.R7$(2),t.Y8G("options",!1),t.R7$(6),t.R50("ngModel",s.selectedProductLimit),t.R7$(),t.Y8G("ngForOf",s.productLimitOptions),t.R7$(),t.Y8G("ngIf",s.isLoadingProducts),t.R7$(),t.Y8G("ngIf",!s.isLoadingProducts),t.R7$(2),t.Y8G("options",!1),t.R7$(7),t.Y8G("ngForOf",s.years),t.R7$(4),t.R50("ngModel",s.selectedBestSellingLimit),t.R7$(),t.Y8G("ngForOf",s.productLimitOptions),t.R7$(18),t.Y8G("ngForOf",s.bestSellingProducts),t.R7$(),t.Y8G("ngIf",s.isLoadingBestSellers),t.R7$(),t.Y8G("ngIf",!s.isLoadingBestSellers&&0===s.bestSellingProducts.length),t.R7$(2),t.Y8G("options",!1),t.R7$(17),t.Y8G("ngForOf",s.debtsByClient),t.R7$(),t.Y8G("ngIf",0===s.debtsByClient.length),t.R7$(2),t.Y8G("options",!1),t.R7$(7),t.Y8G("ngForOf",s.years),t.R7$(16),t.Y8G("ngIf",s.isLoadingOutOfStock),t.R7$(),t.Y8G("ngForOf",s.outOfStockProducts),t.R7$(),t.Y8G("ngIf",!s.isLoadingOutOfStock&&0===s.outOfStockProducts.length))},dependencies:[u.G,E.Sq,E.bT,m.xH,m.y7,m.wz,m.BC,m.vS,U.i,E.QX,E.oe,G,$,m.YN],encapsulation:2})}}return n})()}}]);